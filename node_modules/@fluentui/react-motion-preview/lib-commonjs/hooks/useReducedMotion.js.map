{"version":3,"sources":["useReducedMotion.ts"],"sourcesContent":["import * as React from 'react';\nimport { canUseDOM, useIsomorphicLayoutEffect } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\n\n/**\n * @internal\n *\n * Returns whether the user has requested reduced motion based on the current media query.\n */\nexport const useReducedMotion = (): boolean => {\n  const fluent = useFluent();\n  const reducedMotion = React.useRef(false);\n  const targetWindow = canUseDOM() && fluent.targetDocument?.defaultView;\n\n  const onMediaQueryChange = React.useCallback((e: MediaQueryListEvent) => {\n    reducedMotion.current = e.matches;\n  }, []);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!targetWindow || !targetWindow.matchMedia) {\n      return;\n    }\n\n    const match = targetWindow.matchMedia('screen and (prefers-reduced-motion: reduce)');\n\n    if (match.matches) {\n      reducedMotion.current = true;\n    }\n\n    match.addEventListener('change', onMediaQueryChange);\n\n    return () => match.removeEventListener('change', onMediaQueryChange);\n  }, [onMediaQueryChange, targetWindow]);\n\n  return reducedMotion.current;\n};\n"],"names":["useReducedMotion","fluent","useFluent","reducedMotion","React","useRef","targetWindow","canUseDOM","targetDocument","defaultView","onMediaQueryChange","useCallback","e","current","matches","useIsomorphicLayoutEffect","matchMedia","match","addEventListener","removeEventListener"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BASaA;;;eAAAA;;;;iEATU;gCAC8B;qCACL;AAOzC,MAAMA,mBAAmB;QAGMC;IAFpC,MAAMA,SAASC,IAAAA,uCAAAA;IACf,MAAMC,gBAAgBC,OAAMC,MAAM,CAAC;IACnC,MAAMC,eAAeC,IAAAA,yBAAAA,OAAAA,CAAAA,AAAeN,CAAAA,yBAAAA,OAAOO,cAAc,AAAdA,MAAc,QAArBP,2BAAAA,KAAAA,IAAAA,KAAAA,IAAAA,uBAAuBQ,WAAW,AAAXA;IAE3D,MAAMC,qBAAqBN,OAAMO,WAAW,CAAC,CAACC;QAC5CT,cAAcU,OAAO,GAAGD,EAAEE,OAAO;IACnC,GAAG,EAAE;IAELC,IAAAA,yCAAAA,EAA0B;QACxB,IAAI,CAACT,gBAAgB,CAACA,aAAaU,UAAU,EAAE;YAC7C;QACF;QAEA,MAAMC,QAAQX,aAAaU,UAAU,CAAC;QAEtC,IAAIC,MAAMH,OAAO,EAAE;YACjBX,cAAcU,OAAO,GAAG;QAC1B;QAEAI,MAAMC,gBAAgB,CAAC,UAAUR;QAEjC,OAAO,IAAMO,MAAME,mBAAmB,CAAC,UAAUT;IACnD,GAAG;QAACA;QAAoBJ;KAAa;IAErC,OAAOH,cAAcU,OAAO;AAC9B"}